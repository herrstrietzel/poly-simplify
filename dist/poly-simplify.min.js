!function(t){"use strict";function e(t,e=!1){let n=0;for(let e=0,r=t.length;r&&e<r;e++){n+=t[e].x*t[e===t.length-1?0:e+1].y*.5-t[e===t.length-1?0:e+1].x*t[e].y*.5}return e?Math.abs(n):n}function n(t,{tolerance:n=.5,useRDP:i=!1,decimals:l=-1,output:a="points",meta:o=!1}={}){const y=(t,n="points",r,i=!1)=>{let l=t.length,a=i?e(r):0,o=i?e(t):0,y=+(100-o/a*100).toFixed(3);if("pointstring"!==n&&"string"!==n||(t=t.map((t=>`${t.x} ${t.y}`)).join(" ")),"path"!==n&&"d"!==n||(t="M"+t.map((t=>`${t.x} ${t.y}`)).join(" ")),"pathData"===n||"pathdata"===n){let e=[{type:"M",values:[t[0].x,t[0].y]},...t.slice(1).map((t=>({type:"L",values:[t.x,t.y]})))];t=e}return"json"===n.toLowerCase()&&(t=JSON.stringify(t)),{data:t,count:l,original:r.length,areaOriginal:a,areaSimplified:o,areaDiff:y}};let s=y(t=function(t){let e=t[0].x||!1,n=e&&"object"==typeof t[0]?t[0].constructor.name?t[0].constructor.name:"object":null;if(e&&"object"!==n&&(t=[...t].map((t=>({x:t.x,y:t.y})))),e)return t;let r="string"==typeof t;if(r&&t.startsWith('[{"x":'))return JSON.parse(t);if(r&&(t=t.trim().split(/,| /).filter(Boolean).map(Number)).filter((t=>isNaN(t))).length)return console.warn("input doesn't contain point data â€“ please, check your input structure for syntax errors"),[];return Array.isArray(t)&&2===t[0].length&&(t=t.map((t=>({x:t[0],y:t[1]})))),!Array.isArray(t[0])&&!t[0].hasOwnProperty("x")&&(t=(t=>{let e=[];for(let n=1,r=t.length;n<r;n+=2)e.push({x:t[n-1],y:t[n]});return e})(t)),t}(t),a,t,o);if(t.length<=2||0===n)return o?s:s.data;let p=t[0],u=[p];for(let n=2,r=t.length;n<r;n++){let r=t[n-1],i=t[n],l=0;if(p.x===r.x&&p.y!==r.y||p.x!==r.x&&p.y===r.y)i.x===r.x&&i.y!==r.y||i.x!==r.x&&i.y===r.y||u.push(r),p=r;else{if(!(p.x===r.x&&p.y===r.y||p.x===r.x&&p.y!==r.y||p.x!==r.x&&p.y===r.y)){h=r,l=((x=i).x-h.x)**2+(x.y-h.y)**2;let t=e([p,r,i],!0);!t||(!l||t<.01*l)||u.push(r)}p=r}}var h,x;if(i){u=r(u,n)}return l>-1&&(u=u.map((t=>({x:+t.x.toFixed(l),y:+t.y.toFixed(l)})))),s=y(u,a,t,o),console.log("data",s),o?s:s.data}function r(t,e=.5){if(t.length<=2)return t;let n=function(t,e=48){if(!Array.isArray(t)||t.length<=e)return t;let n=t.length,r=n/e,i=[];for(let n=0;n<e;n++)i.push(t[Math.floor(n*r)]);let l=i.length;return i[l-1]!==t[n-1]&&(i[l-1]=t[n-1]),i}(t),{width:r,height:i}=function(t){let e=t.map((t=>t.x)),n=t.map((t=>t.y)),r=Math.min(...e),i=Math.max(...e),l=Math.min(...n),a=Math.max(...n);return{x:r,left:r,right:i,y:l,top:l,bottom:a,width:i-r,height:a-l}}(n),l=(r+i)/2;e/=l<=10?1e5/l:1;const a=(t,e,n)=>{let r=e.x,i=e.y,l=n.x-r,a=n.y-i;if(0!==l||0!==a){let e=((t.x-r)*l+(t.y-i)*a)/(l*l+a*a);e>1?(r=n.x,i=n.y):e>0&&(r+=l*e,i+=a*e)}return(t.x-r)**2+(t.y-i)**2};let o=[t[0]],y=[];for(y.push([0,t.length-1]);y.length>0;){let[n,r]=y.pop(),i=e,l=-1;for(let e=n+1;e<r;e++){let o=a(t[e],t[n],t[r]);o>i&&(l=e,i=o)}i>e?(y.push([l,r]),y.push([n,l])):o.push(t[r])}return o}"undefined"!=typeof window&&(window.polySimplify=n),t.polySimplify=n,t.simplifyPolyRDP=r}(this["poly-simplify"]=this["poly-simplify"]||{});
